<html>
  <head>
    <title>stockings.core - Stockings 1.0.0 API documentation</title>
    <meta content="Stockings is a Clojure library that gives you an easy to use API to access financial data: current and historical stock quotes, exchange rates, industry sectors, companies, stock symbol suggestions, and more." name="description" />
    <link href="static/favicon.png" rel="icon" />
    <link href="static/favicon.png" rel="shortcut icon" />
    <link media="all" type="text/css" href="static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/internal.css" rel="stylesheet" />
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23136276-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">Stockings</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">Stockings</span> <span id="version">1.0.0</span> API</span><br />
    <ul>
      <li><a class="wiki_link" href="index.html">Overview</a></li>
      <li><a class="wiki_link" href="api-index.html">API Index</a></li>
    </ul>
    <div class="NamespaceTOC">
      <span class="toc-header">Namespaces</span>
      <ul id="left-sidebar-list">
        <li><a href="stockings.alt-api.html" class="wiki_link">stockings.alt</a></li><li><a href="stockings.core-api.html" class="wiki_link">stockings.core</a></li><li><a href="stockings.exchanges-api.html" class="wiki_link">stockings.exchanges</a></li><li><a href="stockings.utils-api.html" class="wiki_link">stockings.utils</a></li>
      </ul>
    </div>
    
    <a href="https://github.com/fxtlabs/stockings" class="wiki_link">GitHub Repository</a>
    <a href="http://clojars.org/com.fxtlabs/stockings" class="wiki_link">Clojars Repository</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div style="margin-left: 1em;" class="toc-section">
    <a href="#toc0">Overview</a>
    <div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/bare-stock-symbol">bare-stock-symbol</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/build-quote-parser">build-quote-parser</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/default-quote-parser">default-quote-parser</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/explode-stock-symbol">explode-stock-symbol</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-exchange-rate">get-exchange-rate</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-exchange-rates">get-exchange-rates</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-historical-quotes">get-historical-quotes</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-industries">get-industries</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-industry">get-industry</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-industry-sectors">get-industry-sectors</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-largest-lte">get-largest-lte</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-quote">get-quote</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-quotes">get-quotes</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-stock">get-stock</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-stocks">get-stocks</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/get-symbol-suggestion">get-symbol-suggestion</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/parse-last-trade-date-time">parse-last-trade-date-time</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/parse-quote-item">parse-quote-item</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/prefix-stock-symbol">prefix-stock-symbol</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/raw-quote-keys">raw-quote-keys</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#stockings.core/to-sorted-map">to-sorted-map</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">stockings.core</span>
  - <span id="header-project">Stockings</span> <span id="header-version">1.0.0</span> (<span id="header-status">stable</span>)
  </h1>
<span id="author-line">by <span id="author-name">Filippo Tampieri &lt;fxt@fxtlabs.com&gt;</span><br /></span>
<br />Full namespace name: <span id="long-name">stockings.core</span>
<p></p>
<h2>Overview</h2>
<div id="namespace-docstr"><p>Get current and historical stock quotes, current currency exchange rates,
and info on industry sectors, industries, companies, and stocks
from Yahoo! Finance.</p>
</div>


<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/bare-stock-symbol">bare-stock-symbol</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (bare-stock-symbol stock-symbol)
</pre>
  <div id="var-docstr"><p>Returns a stock symbol stripped of the stock exchange prefix, if any.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L44" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/build-quote-parser">build-quote-parser</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (build-quote-parser key-map)
</pre>
  <div id="var-docstr"><p>Returns a parser that can be passed to <code>get-quote</code> and <code>get-quotes</code> to
get custom stock quotes. The generated parser will return a stock quote
in the form of a map with a set of desired keys. The builder expects a
map from the set of desired keys to the corresponding keys in the raw
stock quote (see <code>raw-quote-keys</code> for a list of available keys).</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L179" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/default-quote-parser">default-quote-parser</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (default-quote-parser raw-quote)
</pre>
  <div id="var-docstr"><p>The quote parser used by <code>get-quote</code> and <code>get-quotes</code> when a custom quote
parser is not provided. It returns a stock quote in the form of a map
with :symbol, :name, :last-date-time, :last, :open, :previous-close,
:high, :low, and :volume keys.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L202" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/explode-stock-symbol">explode-stock-symbol</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (explode-stock-symbol stock-symbol)
</pre>
  <div id="var-docstr"><p>Takes a stock symbol and explodes it into its exchange prefix and
bare symbol parts, returning a vector with two entries. If the
exchange prefix is missing, the first entry in the vector will be
<code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L33" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-exchange-rate">get-exchange-rate</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-exchange-rate base-currency quote-currency)
</pre>
  <div id="var-docstr"><p>Returns the currency exchange rate for the supplied currency pairs.
The currency pair is given as two separate parameters: base and quote
currencies, specified as keywords or strings using the ISO 4217
3-letter designators (e.g. <code>(get-exchange-rate :usd :eur)</code>).
The result is a map with :base, :quote, :rate, :ask, :bid, and
:date-time keys.
If the exchange rate for the given currency pair cannot be found, it
returns <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L414" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-exchange-rates">get-exchange-rates</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-exchange-rates &amp; currency-pairs)
</pre>
  <div id="var-docstr"><p>Returns a sequence of currency exchange rate for all the supplied
currency pairs. Each currency pair is given as a vector of two items:
base and quote currencies, specified as keywords or strings using the
ISO 4217 3-letter designators (e.g. <code>[:usd :eur]</code>).
The items in the returned sequence are maps with :base, :quote, :rate,
:ask, :bid, and :date-time keys.
If the exchange rate for a given currency pair cannot be found, its
place in the result sequence will be <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L395" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-historical-quotes">get-historical-quotes</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-historical-quotes stock-symbol start-date end-date)
</pre>
  <div id="var-docstr"><p>Returns a sequence of historical stock quotes corresponding to the
supplied stock symbol, one quote per day between the supplied start
and end dates (as <code>org.joda.time.LocalDate</code> objects). Quotes
corresponding to dates falling on weekends and holidays are not
included in the resulting sequence. If quotes for the given symbol
or period cannot be found, it returns <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L262" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-industries">get-industries</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-industries &amp; industry-ids)
</pre>
  <div id="var-docstr"><p>Returns a sequence of the industries corresponding to the supplied
industry ids. Each industry is returned as a map with :id, :name,
and :companies keys. The value of the latter is a vector of maps
corresponding to the companies in that industry. Each company is
a map with :name and :symbol keys. The symbol value can be passed to
<code>get-quote</code> or <code>get-historical-quotes</code> to get stock quotes for that company.
If the industry for a given id cannot be found, its place in the result
sequence will be nil.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L343" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-industry">get-industry</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-industry industry-id)
</pre>
  <div id="var-docstr"><p>Returns the industry corresponding to the supplied industry ids.
The result is a map with :id, :name, and :companies keys. The value
of the latter is a vector of maps corresponding to the companies in
that industry. Each company is a map with :name and :symbol keys.
The symbol value can be passed to <code>get-quote</code> or <code>get-historical-quotes</code>
to get stock quotes for that company.
If the industry for the supplied id cannot be found, it returns <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L359" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-industry-sectors">get-industry-sectors</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-industry-sectors)
</pre>
  <div id="var-docstr"><p>Returns a sequence of industry sectors. Each sector is a map with
:name and :industries keys. The value of the latter is a vector of
maps corresponding to the industries for that sector. Each industry
is a map with :id and :name fields. The id value can be passed to
<code>get-industry</code> to get a list of the companies for a given industry.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L328" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-largest-lte">get-largest-lte</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-largest-lte map key)
       (get-largest-lte map key not-found)
</pre>
  <div id="var-docstr"><p>Returns the value mapped to the largest key that is less than or
equal to the supplied key; returns <code>not-found</code> or <code>nil</code> if a matching key
cannot be found. The supplied map should be a sorted map. You can use
this function to lookup historical stock quotes by date and still get
a valid quote when the date falls on a weekend or holiday. Use
<code>to-sorted-map</code> to create a sorted map from a sequence of historical quotes.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L49" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-quote">get-quote</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-quote parser stock-symbol)
       (get-quote stock-symbol)
</pre>
  <div id="var-docstr"><p>Returns the stock quote corresponding to the given stock symbol.
If the first parameter is a function, it uses it as a parser to turn
a raw stock quote (provided by Yahoo! Finance) to a custom stock quote
structure; otherwise, it uses <code>default-quote-parser</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L238" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-quotes">get-quotes</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-quotes parser &amp; stock-symbols)
</pre>
  <div id="var-docstr"><p>Returns a sequence of stock quotes corresponding to the given stock
symbols. If the first parameter is a function, it uses it as a
parser to turn a raw stock quote (provided by Yahoo! Finance) to a
custom stock quote structure; otherwise, it uses <code>default-quote-parser</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L222" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-stock">get-stock</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-stock stock-symbol)
</pre>
  <div id="var-docstr"><p>Returns the stock description for the supplied stock symbols.
This description is a map with :symbol, :name, :start-date, :end-date,
:sector, :industry, and :full-time-employees keys.
If data for a symbol cannot be found it returns <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L313" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-stocks">get-stocks</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-stocks &amp; stock-symbols)
</pre>
  <div id="var-docstr"><p>Returns a sequence of stock descriptions for the supplied stock symbols.
A stock description is a map with :symbol, :name, :start-date, :end-date,
:sector, :industry, and :full-time-employees keys.
If data for a symbol cannot be found that description will be <code>nil</code>.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L301" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/get-symbol-suggestion">get-symbol-suggestion</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (get-symbol-suggestion company-name)
</pre>
  <div id="var-docstr"><p>Returns zero, one or more suggestions for the stock symbols corresponding
to the supplied company name. Company name prefixes will return results
as well. Note that large companies may be traded on several exchanges and
may thus result in a long list of suggestions.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L434" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/parse-last-trade-date-time">parse-last-trade-date-time</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (parse-last-trade-date-time raw-quote)
</pre>
  <div id="var-docstr"><p>Looks up the last trade date and time in the supplied raw stock quote
and combines them into an <code>org.joda.time.DateTime</code> object in UTC. It
works around an inconsistency in the Yahoo! Finance data where the
last trade date is represented in UTC while the last trade time seems
to be using the North American East Coast time zone. It returns <code>nil</code>
if a valid <code>DateTime</code> object cannot be created.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L167" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/parse-quote-item">parse-quote-item</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (parse-quote-item raw-quote k)
</pre>
  <div id="var-docstr"><p>Looks up the value of a supplied key into a raw stock quote and
converts it from a string into a more useful type (int, double, date,
time, or keyword depending on the key). It returns <code>nil</code> if it cannot
find a valid value.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L158" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/prefix-stock-symbol">prefix-stock-symbol</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (prefix-stock-symbol exchange-symbol stock-symbol)
</pre>
  <div id="var-docstr"><p>Takes the symbols for a stock exchange and a stock and combines them
to create an exchange-prefixed stock symbol (e.g. "NASDAQ" and
"YHOO" are combined into "NASDAQ:YHOO").</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L24" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/raw-quote-keys">raw-quote-keys</h2>
  <span id="var-type">var</span><br />
  <pre id="var-usage"></pre>
  <div id="var-docstr"><p>A list of all the keys available in a raw stock quote. A custom stock
quote can be created by supplying <code>get-quote</code> with a parser capable of
extracting the value corresponding to a chosen subset of these keys
from a raw stock quote and packaging them into the desired result
structure.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L151" id="var-source">Source</a>
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="stockings.core/to-sorted-map">to-sorted-map</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (to-sorted-map get-key xs)
</pre>
  <div id="var-docstr"><p>Builds a sorted map from the supplied collection. The supplied <code>get-key</code>
function is used to compute the key corresponding to a given item
in the collection.</p>
</div>
  
  
  <a href="https://github.com/fxtlabs/stockings/blob/ce692c8626d64438cb9dbfe55937a2063b1c4fc5/src/stockings/core.clj#L62" id="var-source">Source</a>
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">Copyright 2011 Filippo Tampieri</div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>